 <app-search-bar></app-search-bar>

<div class="container-fluid">
    <div class="row">
        <!-- todo if isCretor -->
        <div *ngIf="listing.owner" class="border">
            <div class="row">
                <div class="col-2"><a href="/edit/{{listing.id}}">Revise</a></div>
                <div class="col-3">  <p>List starts at:  {{listing.createOn | date:'dd/MM/yyyy HH:mm' }} </p> </div>
                <div class="col-3"><p>Selling format: {{listing.sellingFormat.title}}</p> </div>
                <div class="col"></div>
            </div>
            <div class="row"  >
                <div class="col-2">  <a *ngIf="listing.active" href="#" (click)="onEnd(listing.id)"  >End list</a></div>
                <div class="col-3">   <p>Time duartion: {{listing.sellingFormat.duration }} days</p> </div>
                <div class="col-3"><p></p></div>
                <div class="col"></div>
            </div>
        </div>

        <br>
        <div class="col-lg-10 col-md-8">
                    <!-- condition -->
               <div class="row">
                  <div class="row">
                    <div class="col-5"><img src="{{listing.imageUrl}}" alt="{{listing.title}}" width="400" height="600"></div>
                    <div class="col">

                    <h2>{{listing.title}}</h2>
                    <h4>Condition: {{listing.condition.title}}</h4>

            <div class="row" *ngIf="!listing.active">
                <div class="col-3"><h4>Listing Was Ended</h4></div>
                <!-- todo order show -->
            </div>

             <div  class="row" *ngIf="listing.sellingFormat.title==='FIXED' && listing.active">
                 <form [formGroup]= "buyForm" (ngSubmit)="onBuy()" >
                     <div class="row">

                        <div class="col-1"><label for="" >
                            Price: BGN {{listing.sellingFormat.price | number :'.2-2'}}
                        </label></div>
                        <div class="col-1" style="visibility: hidden;">
                             <input  formControlName="price" type="number" step="0.01" value="listing.price" /></div>
                        <div class="col" ></div>
                    </div>

                <div class="row">
                    <div class="col-1"><label for="" >qty:</label></div>
                    <div class="col-1">
                          <input formControlName="quantity" type="number" value="1" step="1" />
                        <p>Availble:{{listing.sellingFormat.quantity}}</p></div>
                    <div class="col" ></div>
                </div>
                <div class="row"> <div class="col-7">  <button >Buy it now</button></div></div>
                <div class="row"> <div class="col-7"> <button >Add to Basket</button></div></div>
                </form>
             </div>

            <div  *ngIf="listing.sellingFormat.title==='ACTION' && listing.active">
            <form>
                <h5>Price: BGN</h5>   <input  type="number" step="0.01" value="{{listing.sellingFormat.price}}">

                <input type="submit"value="Place a Bid"/>

            </form>
            </div>

            <div *ngIf="listing.active" class="row"><div class="col-5"> <button>Add to Watch List</button></div></div>

            <div class="row" *ngIf="listing.deliveryDomestic.price">
                <div class="row">
                    <h5>Domestic Delivery BGN {{listing.deliveryDomestic.price | number:'.2-2'}}</h5>
                </div>

                <div class="row" *ngIf="listing.deliveryInternational.price">
                    <div class="row">
                        <h5>International Delivery BGN {{listing.deliveryInternational.price | number:'.2-2'}}</h5>
                    </div>
                </div>
                <div class="row ">
                    <div class="row">
                        <h5>Accept Payment: {{listing.payment}}</h5>
                    </div>

                 </div>
                    </div>
                </div>
            </div>
        <!-- Description -->
            <div class="row ">
                <label  class="form-label">Description</label>
                <textarea disabled type="text" class="form-control" >{{listing.description}}</textarea>
            </div>

             </div>
         </div>
         <div class="col-2">
             <div class="row">
                 Watch Count: {{listing.watchCount}}
             </div>
             <div class="row">
                 <a href="/usr/profile/{{listing.createFrom}}"> Seller:  {{listing.createFrom}}</a> <br>
                 <a href="/usr/shop/{{listing.createFrom}}">Visit {{listing.createFrom}} shop</a> <br>
                 <a href="/usr/feedback/{{listing.createFrom}}">Look {{listing.createFrom}} Feedbacks</a>
             </div>
            </div>
    </div>
</div>